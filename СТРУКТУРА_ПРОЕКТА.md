# Структура проекта кофейного бота

Этот документ описывает структуру проекта и назначение каждого файла и директории.

## Корневая директория

- `package.json`: Файл конфигурации проекта, содержит список зависимостей и скрипты для запуска.

## Директория `src/`

Содержит исходный код проекта.

- `index.js`: Основной файл проекта, обрабатывает входящие webhook-запросы.
- `bot.js`: Инициализация ботов и настройка основных обработчиков команд.
- `config.js`: Конфигурационный файл, содержит переменные окружения.

### Директория `src/utils/`

Содержит вспомогательные функции и утилиты.

- `dataManagement.js`: Функции для загрузки данных о кофе.
- `messageProcessing.js`: Функции для обработки сообщений (извлечение тегов, валидация, форматирование контекста).
- `apiHelper.js`: Функции для работы с API (отправка запросов с повторными попытками).

### Директория `src/services/`

Содержит основные сервисы приложения.

- `coffeeService.js`: Сервис для работы с данными о кофе (инициализация, получение данных).
- `orderService.js`: Сервис для обработки заказов (сохранение данных заказа).

### Директория `src/handlers/`

Содержит обработчики команд и сообщений.

- `commandHandlers.js`: Обработчики команд бота (например, команда /start).
- `messageHandlers.js`: Обработчик текстовых сообщений, основная логика диалога с пользователем.

## Директория `data/`

Содержит файлы с данными.

- `coffee_data.json`: JSON-файл с информацией о доступных видах кофе.

## Директория `prompts/`

Содержит шаблоны промптов для AI.

- `prompt.js`: Шаблон промпта для взаимодействия с AI-моделью.

## Как использовать эту структуру

1. Если вам нужно изменить логику обработки сообщений, обратитесь к файлу `src/handlers/messageHandlers.js`.
2. Для изменения доступных видов кофе отредактируйте файл `data/coffee_data.json`.
3. Чтобы изменить поведение бота при старте, отредактируйте функцию в `src/handlers/commandHandlers.js`.
4. Для изменения взаимодействия с AI-моделью отредактируйте шаблон в `prompts/prompt.js`.
5. Если нужно добавить новую команду боту, добавьте её в `src/bot.js` и создайте соответствующий обработчик в `src/handlers/commandHandlers.js`.
6. Для изменения конфигурации проекта (токены, ID чатов и т.д.) отредактируйте `src/config.js`.

Эта структура разработана для удобства поддержки и масштабирования проекта. Каждый файл отвечает за определённую функциональность, что облегчает навигацию по коду и внесение изменений.